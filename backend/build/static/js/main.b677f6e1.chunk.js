(this.webpackJsonpquell=this.webpackJsonpquell||[]).push([[0],{115:function(e,t,a){e.exports=a(161)},120:function(e,t,a){},157:function(e,t){},161:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),l=a.n(c),o=a(12),i=(a(120),a(33)),s=a.n(i),u=a(58),m=a(106),d=a(90),p=function(){return window.history.replaceState({},document.title,window.location.pathname)},h=r.a.createContext(),f=function(){return Object(n.useContext)(h)},E=function(e){var t=e.children,a=e.onRedirectCallback,c=void 0===a?p:a,l=Object(m.a)(e,["children","onRedirectCallback"]),i=Object(n.useState)(),f=Object(o.a)(i,2),E=f[0],g=f[1],b=Object(n.useState)(),v=Object(o.a)(b,2),y=v[0],O=v[1],N=Object(n.useState)(),k=Object(o.a)(N,2),j=k[0],w=k[1],S=Object(n.useState)(!0),C=Object(o.a)(S,2),x=C[0],T=C[1],A=Object(n.useState)(!1),R=Object(o.a)(A,2),B=R[0],D=R[1];Object(n.useEffect)((function(){(function(){var e=Object(u.a)(s.a.mark((function e(){var t,a,n,r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.a)(l);case 2:if(t=e.sent,w(t),!window.location.search.includes("code=")||!window.location.search.includes("state=")){e.next=10;break}return e.next=7,t.handleRedirectCallback();case 7:a=e.sent,n=a.appState,c(n);case 10:return e.next=12,t.isAuthenticated();case 12:if(r=e.sent,g(r),!r){e.next=19;break}return e.next=17,t.getUser();case 17:o=e.sent,O(o);case 19:T(!1);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var I=function(){var e=Object(u.a)(s.a.mark((function e(){var t,a,n=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},D(!0),e.prev=2,e.next=5,j.loginWithPopup(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:return e.prev=10,D(!1),e.finish(10);case 13:return e.next=15,j.getUser();case 15:a=e.sent,O(a),g(!0);case 18:case"end":return e.stop()}}),e,null,[[2,7,10,13]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(!0),e.next=3,j.handleRedirectCallback();case 3:return e.next=5,j.getUser();case 5:t=e.sent,T(!1),g(!0),O(t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(h.Provider,{value:{isAuthenticated:E,user:y,loading:x,popupOpen:B,loginWithPopup:I,handleRedirectCallback:P,getIdTokenClaims:function(){return j.getIdTokenClaims.apply(j,arguments)},loginWithRedirect:function(){return j.loginWithRedirect.apply(j,arguments)},getTokenSilently:function(){return j.getTokenSilently.apply(j,arguments)},getTokenWithPopup:function(){return j.getTokenWithPopup.apply(j,arguments)},logout:function(){return j.logout.apply(j,arguments)}}},t)},g=a(93),b=a(91),v=a(105),y=function(){var e=f().loginWithRedirect;return r.a.createElement(b.a,{fluid:"md",className:"p-3"},r.a.createElement(g.a,null,r.a.createElement("h1",{className:"header"},"Quell"),r.a.createElement(v.a,{onClick:function(){return e({})}},"Login/Signup")))},O=a(213),N=a(214),k=function(){return r.a.createElement(b.a,{fluid:!0,className:"topbar"},r.a.createElement("div",{className:"logo"},"Quell"))},j=a(215),w=a(94),S=a.n(w),C=function(e){var t=f(),a=t.logout,n=t.user;return r.a.createElement("div",{className:"profile"},r.a.createElement("img",{src:S.a,className:"profile-pic",alt:"Profile"}),r.a.createElement("div",{className:"profile-name"},e.userName),r.a.createElement("div",{className:"profile-email"},n.name),r.a.createElement(v.a,{onClick:a},"Log Out"))},x=function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),c=a[0],l=a[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"menu-container"},r.a.createElement("div",{className:"button-group"},r.a.createElement(v.a,{onClick:function(){return window.open("https://github.com/sneakysensei/Quell-HackJaipur","_blank")}},"Github Repo"),r.a.createElement(v.a,{onClick:function(){return l(!0)}},"Get Help")),r.a.createElement(C,{userName:e.userName})),r.a.createElement(j.a,{show:c,onHide:function(){return l(!1)}},r.a.createElement(j.a.Header,{closeButton:!0},r.a.createElement(j.a.Title,null,"Get Help")),r.a.createElement(j.a.Body,null,"Important contacts can be shown here."),r.a.createElement(j.a.Body,null,"Contacts related to mental illness helplines")))},T=a(205),A=a(221),R=a(211),B=a(218),D=a(222),I=a(212),P=a(209),F=a(162),W=a(216),U=a(217),J=a(219),L=a(210),H=a(220),_=Object(T.a)((function(e){return{root:{width:"100%"},button:{marginTop:e.spacing(1),marginRight:e.spacing(1)},actionsContainer:{marginBottom:e.spacing(2)},resetContainer:{padding:e.spacing(3)}}}));function q(e){var t=f(),a=t.user,c=t.getTokenSilently,l=_(),i=r.a.useState(0),s=Object(o.a)(i,2),u=s[0],m=s[1],d=["Enter your name","Select account type","More Details"],p=Object(n.useState)(a.nickname),h=Object(o.a)(p,2),E=h[0],g=h[1],b=r.a.useState("user"),v=Object(o.a)(b,2),y=v[0],O=v[1],N=r.a.useState("Depression"),k=Object(o.a)(N,2),j=k[0],w=k[1],S=function(e){O(e.target.value)},C=function(e){w(e.target.value)},x=function(){m((function(e){return e+1}))},T=function(){m((function(e){return e-1}))};console.log(E),console.log(y),console.log(j);return r.a.createElement("div",{className:l.root},r.a.createElement(A.a,{activeStep:u,orientation:"vertical"},d.map((function(e,t){return r.a.createElement(R.a,{key:e},r.a.createElement(B.a,null,e),r.a.createElement(D.a,null,function(e){switch(e){case 0:return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,null,"This name would be shown to other users in the group. You can also signup under an alias."),r.a.createElement(W.a,{required:!0,label:"Name",value:E,onChange:function(e){g(e.target.value)}}));case 1:return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,null,"Are you a user or a therapist?"),r.a.createElement(H.a,{component:"fieldset"},r.a.createElement(J.a,{row:!0,name:"type",value:y,onChange:S},r.a.createElement(L.a,{value:"user",control:r.a.createElement(U.a,null),label:"User"}),r.a.createElement(L.a,{value:"therapist",control:r.a.createElement(U.a,null),label:"Therapist"}))));case 2:return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,null,"therapist"===y&&"All Clear!","user"===y&&"Select the condition that you can most closely realte to."),"user"===y&&r.a.createElement(H.a,{component:"fieldset"},r.a.createElement(J.a,{row:!0,name:"type",value:j,onChange:C},r.a.createElement(L.a,{value:"Depression",control:r.a.createElement(U.a,null),label:"Depression"}),r.a.createElement(L.a,{value:"Anxiety disorder",control:r.a.createElement(U.a,null),label:"Anxiety disorder"}),r.a.createElement(L.a,{value:"Obesessive-Compulsive disorder",control:r.a.createElement(U.a,null),label:"Obesessive-Compulsive disorder"}),r.a.createElement(L.a,{value:"Post-traumatic stress disorder",control:r.a.createElement(U.a,null),label:"Post-traumatic stress disorder"}),r.a.createElement(L.a,{value:"Bipolar disorder",control:r.a.createElement(U.a,null),label:"Bipolar disorder"}))));default:return r.a.createElement(r.a.Fragment,null)}}(t),r.a.createElement("div",{className:l.actionsContainer},r.a.createElement("div",null,r.a.createElement(I.a,{disabled:0===u,onClick:T,className:l.button},"Back"),r.a.createElement(I.a,{variant:"contained",color:"primary",onClick:x,className:l.button},u===d.length-1?"Finish":"Next")))))}))),u===d.length&&r.a.createElement(P.a,{square:!0,elevation:0,className:l.resetContainer},r.a.createElement(F.a,null,"Thank you for your responses - Click to submit"),r.a.createElement(I.a,{onClick:function(){m(0)},className:l.button},"Reset"),r.a.createElement(I.a,{variant:"contained",color:"primary",onClick:function(){c().then((function(e){var t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e},body:JSON.stringify({name:E,userType:y,condition:"user"===y?j:""})};fetch("/users/signup",t).then((function(){window.location.reload()}))}))},className:l.button},"Submit and Signup")))}var z=function(e){return console.log(e.authData),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"members-container"},r.a.createElement("div",{className:"member-heading"},"Members"),e.authData.groupInfo.members.map((function(t,a){var n=t.name===e.authData.data.name?" active":"";return r.a.createElement("div",{key:a,className:"member".concat(n)},r.a.createElement("div",{className:"member-name"},t.name),"therapist"===e.authData.data.type&&"user"===t.type&&r.a.createElement("div",{className:"member-condition"},t.condition),"therapist"===t.type&&r.a.createElement("div",{className:"member-condition"},"Therapist"))}))))},Q=a(104),G=a(102),Y=a.n(G),M=a(127)(),K=function(e){var t=Object(n.useRef)(),a=f().getTokenSilently,c=Object(n.useState)(""),l=Object(o.a)(c,2),i=l[0],s=l[1],u=Object(n.useState)([]),m=Object(o.a)(u,2),d=m[0],p=m[1];return Object(n.useEffect)((function(){a().then((function(t){fetch("/messages/?id=".concat(e.authData.groupInfo._id),{headers:{Authorization:"Bearer "+t}}).then((function(e){return e.json()})).then((function(e){console.log(e),p(e.messages)}))}))}),[]),Object(n.useEffect)((function(){M.on("message",(function(e){p((function(t){return[].concat(Object(Q.a)(t),[e])}))}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"chat"},r.a.createElement(Y.a,{autohide:!0,start:"bottom",ref:t},d.map((function(t){var a=t.name===e.authData.data.name?" active":"";return r.a.createElement("div",{className:"message".concat(a)},r.a.createElement("div",{className:"message-name"},t.name),r.a.createElement("div",{className:"message-text"},t.text))})))),r.a.createElement("div",{className:"chat-inbox"},r.a.createElement(W.a,{className:"input",label:"Start typing...",variant:"filled",value:i,onChange:function(e){s(e.target.value)}}),r.a.createElement(v.a,{onClick:function(){""!==i&&a().then((function(t){var a={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t},body:JSON.stringify({groupid:e.authData.groupInfo._id,name:e.authData.data.name,text:i})};fetch("/messages",a).then((function(){s("")}))}))}},"Send")))},Z=function(){var e=f().getTokenSilently,t=Object(n.useState)({}),a=Object(o.a)(t,2),c=a[0],l=a[1];return Object(n.useEffect)((function(){e().then((function(e){fetch("/users/authenticate",{headers:{Authorization:"Bearer "+e}}).then((function(e){return e.json()})).then((function(e){return l(e)}))}))}),[]),console.log(c),"signup"===c.type?r.a.createElement(q,null):"login"===c.type?r.a.createElement(r.a.Fragment,null,r.a.createElement(k,null),r.a.createElement(b.a,{fluid:!0,className:"chat-container"},r.a.createElement(O.a,null,r.a.createElement(N.a,{style:{paddingLeft:0,paddingRight:0}},r.a.createElement(x,{userName:c.data.name})),r.a.createElement(N.a,{style:{paddingLeft:0,paddingRight:0},xs:6},r.a.createElement("div",{className:"chat-container"},r.a.createElement(K,{authData:c}))),r.a.createElement(N.a,{style:{paddingLeft:0,paddingRight:0}},r.a.createElement(z,{authData:c}))))):r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},c&&r.a.createElement("h2",null,"Logging In...")))};var $=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],c=t[1],l=f(),i=l.loading,s=l.user,u=l.isAuthenticated;return s&&!a&&c(!0),i?r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",null,"Please wait..."))):u?r.a.createElement("div",{className:"App"},r.a.createElement(Z,null)):r.a.createElement("div",{className:"App"},r.a.createElement(y,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var V=a(59),X=a(103),ee=Object(X.a)();a(160);l.a.render(r.a.createElement(E,{domain:V.domain,client_id:V.clientId,audience:V.audience,redirect_uri:window.location.href,onRedirectCallback:function(e){ee.push(e&&e.targetUrl?e.targetUrl:window.location.pathname)}},r.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},59:function(e){e.exports=JSON.parse('{"domain":"sneakysensei.us.auth0.com","clientId":"sTYcQZgSob58BYAU3gd2OhbwgnhaKIt2","audience":"http://localhost:3000"}')},94:function(e,t,a){e.exports=a.p+"static/media/user.85cddc58.svg"}},[[115,1,2]]]);
//# sourceMappingURL=main.b677f6e1.chunk.js.map